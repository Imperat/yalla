/**
 * Created by arif on 2/11/2017.
 */

var scrollablePanel = $inject('comp/scrollable-panel');
var dataGroup = $inject('comp/data-group');

var loadingStart = false;
function itemRenderer(item){


    return ['div',
        {
            style : {
                display : 'inline-block',
                fontSize : '12px',
                padding :'1em',
                margin : '0',
                width : '300px'

            }
        },
        ['div',{
            style : {
                display : 'inline-block',
                padding : 0,
                margin : 0,
                background : '#FFF',
                "-webkit-box-shadow": "0px 0px 15px 1px rgba(0,0,0,0.5)",
                "-moz-box-shadow": "0px 0px 15px 1px rgba(0,0,0,0.5)",
                "box-shadow": "0px 0px 15px 1px rgba(0,0,0,0.5)",
                fontSize : 0,
                position : 'relative',
                width : '300px',
                height : '300px'
            }
        },['img',{
            id : item,
            key : item
        }],
        ['div',{
            style : {
                position : 'absolute',
                left : 0,
                right : 0,
                bottom : 0,
                backgroundColor : 'white',
                color : 'black',
                fontSize: '16px',
                padding : '1em',
                opacity : 0.8
            }
        },'Lorem ipsum dolor sit amet, consectetur adipiscing elit.']]

    ]
}

function startLoadingImage() {
    items.reduce(function(promise,next){
        return promise.then(function(){
            return new Promise(function(resolve){
                var imageDom = document.getElementById(next);
                imageDom.onload = function(){
                    resolve(true);
                };
                //imageDom.src ='assets/images/'+next+'.jpg';
                imageDom.src = 'http://lorempixel.com/300/300/food?_uid='+Math.round(Math.random()*100000);
            });
        })
    },Promise.resolve());
}

function $render(params){
    if(!loadingStart){
        loadingStart = true;
        startLoadingImage();
    }
    return [scrollablePanel,{
        onScroll:params.onscroll,
        content : [dataGroup,{
            dataProvider : items,
            dataRenderer : itemRenderer
        }]
    }]
}


var items = ['000b0ca9d21b82d6de6db3d8085b084e5ffb781b',
    '002b7a0130148f716ce302036c17ccc1ec21c17f',
    '00a49ff0b69d7f6ce9f50012ca07fe4955478717',
    '00a677b50305ceef3604e6094a96e1ad25d1c3c5',
    '00ab45a94a0e8ad3a461ae2d9ba330ebdf76c016',
    '00e8ea158c094b1c0038bd07f86bd3412a26f7c7',
    '00e8fa9b55e658f84863db2e8adbd1435d190eff',
    '00e9e535f2acbc672cfc42589fc71c95d9e85b28',
    '00f8dcc948307dd6b88d6098e4db880d31e4af7f',
    '01d4c28c74eec4aa0cec5ce43867fa954d2845aa',
    '01ec7686f2f5a8c7abbe2dc3c6d36b064003dfd0',
    '01f61c4608540d70e3863cfa6f93f0acaf116e08',
    '02a027b3cf8fd4fc04e784ea38169579e6322833',
    '02bde2156ea0c57b4d54e5be239351a51188e79e',
    '0a0da4d3eac86d400834b60ce446d3d255718d70',
    '0a233799ea0ba399aca72ff8553290ea513b0f3f',
    '0a3e0054265ad3d8e2a75a6fb8dd3948d0d6e69b',
    '0a422c8b03e53d5a913bece6429b28a2b393222f',
    '0a656dc0ff369b1e9e8529baef95f2016a8dcfe1',
    '0a69515307f3c6937fbc4e9a7eb065cd8bf5aba2',
    '0a6ce7309c3c246059dc159af5596b163f24cece',
    '0a7737296f7cd37b55b306fa7297721e6e48a701',
    '0a8eef46a459cde39bbec4f33c0364c15ce8b21b',
    '0a8fb3fce65e33dc12758ed86cae696e3c5ce8e7',
    '0a91d89490d6c95208a2278a1b43c79bb22b9dbb',
    '0a928a7db430ef3e88b8d8d22abb04a49c23210a',
    '0a93c020f8bfd0411570b14ec6aba7c0f686c358',
    '0ab01739f9627e922efbe56fa6a7584296aebe40',
    '0ab84fdc605f5861973a0d414f58a319e95d4e6e',
    '0abac485d55ff15105e8e8fbf36a4fe0e42b1b97',
    '0ac2a28b7e841c3b14423def5a94832ffce38a74',
    '0ac888cdf13116be2a8116bf6a42728c24199f50',
    '0ace5495f0286981d32eabdec051bf4df5399757',
    '0af12ba124677ea12ac823b343903cd33483eabf',
    '0afbd80033bcd6bc276d34d4b5e36d3e6d3ac170',
    '0b0e2c64adbb52bb921bd4c98e08c9d54a090ac6',
    '0b19d023cea4b36c2c7d7371b45c0514ba1174d5',
    '0b29f8dfb04821e64b17c9119527631d3eba1ed1',
    '0b318c10643f160979423954f5038f38b47dd8d4',
    '0b4b6e04edd7aa48ccb407be7f8ddfd93e0ed10a',
    '0b4ba2401432d6baedf37c8f2acc5fbf2e88deb5',
    '0b4d4c83ffade1822d9a0018162c1273f2e1762b',
    '0b59e2891d5e6080293909266843dfd7da8e573f',
    '0b9beb1ff4e28af10a44e7a733d3c970a01a5a0d',
    '0bb3ac2e7e27459ce6ecd0af3c6471232ba941e3',
    '0bcb9d3fafe8667c647b3f08dbe18779a73e5a36',
    '0bd6f62811a65317668d57d156b47f738910b1dc',
    '0be96e079158ed53f6c3886fc654b5f804f88629',
    '0beb962b24f0acc69ffe425817e95d3ce216bae6',
    '0bf1f8cdd8fda8b2ebee74c1cf5f2f23d06fb347',
    '0bf3dc3e0d30439b5ea530fe849357c6339afc70',
    '0bf52c67ababef6302f0bc4c69fd52d0c12d2342',
    '0bfd05a27bec36fd0f0060915725f4056ae44165',
    '0c04b05b9954430f1cbcb0880ca51760acd10fcc',
    '0c182861fe91e3a94e1a43510e4314c9efa8d304',
    '0c1cc238a2207e446908ae152d8f2fd94d2e0a45',
    '0c1d7f0ad3a64870dff7458868fcb317bf3e1107',
    '0c1e03842c742dbd8b4a6a5563fdc324384a396d',
    '0c256f5f13eac1defa4223647fefde004560eea7',
    '0c2961aed4e94909ecfd26ef2df0a73a0ea0d759',
    '0c2f435513ac87a9c9769524df0995578b60562d',
    '0c749c851d740fd0001be75c4dbde41299b4d0b0',
    '0c86cc57c246b7c1cf34a5f2f4388d0d5874850c',
    '0c88f95d015fd9c9d68d065de24445606d0dfc50',
    '0c896cb84bd272d914f891d1131076d93c30015c',
    '0c969cde1df98144293cf31c55c992b859c36ab9',
    '0c989b751208c1b95dc7641dd0b5ef7c23a80b6e',
    '0cb6599bdb16aa36958a8270d1bfbc8657218bc4',
    '0ccdd61b1e3d82bf11dd3b5df5fab411e100919d',
    '0cd2595e2e91589040e6006c07b5ef37e4f8e2fc',
    '0cec62f6831b2702993841b5b3cade69e25d6058',
    '0d26dcb0274ff0e09f8c6225f943ca04f104e5aa',
    '0d303816a25989164edc65f48b61729502542d5b',
    '0d3c135bf6cebeddf951d76dcd6f4ac4d7f5a2eb',
    '0d3d2b05ae4aceeee25bb2e1b2b8a7569e3de2de',
    '0d4a92ed3762c12ee472fe31ee3f9e5d32b91f97',
    '0d5de0f1e83a6d4abc018c85587352d137c3aa82',
    '0d5f656f1d51727fe58431e929924085164c75e5',
    '0d5fa24d4e5f3d8b0244796d06de10ce41e494b2',
    '0d6bfd5aec3dd8a4ec2fc3b432ae3cdc0696a3a7',
    '0d7f92fa3264a73c5604f858a638c1bef84bd30e',
    '0d815f607ae268c8b635ff35f91ddb587f1c3dab',
    '0d9aa73c82f3214388aab5a8761371e26447a08e',
    '0da18cb51c1c4ac54062b9154dc09bc9d7811b0c',
    '0da7c937f6c648f2607d0b996c879d52224cfc46',
    '0daa889c3bd6ed79ae936fa93b34aa5bc47ed8ab',
    '0db7effdc0bd8b3632c6e040f67f0bc25c86cdf3',
    '0dbead180268eda72b79ccc3a18ecb2345fc63c5',
    '0dc016e10344e420cb66d5cd49d661240da7b052',
    '0dc279be7e02c8e550b43e9658eafc252d8be342',
    '0dc5609da45732cd868f7d897732f5b0efc9fb7b',
    '0dd1f9e3757a08345fe25d53ca38be0427a473b5',
    '0de1fb6238d511458f9e8d225203916fa9143318',
    '0de305b7db1d13f7e7200ad52284da4f9e4b1000',
    '0e1437d9e1b7fea7c17eb8de23d911e72b7903a1',
    '0e1e320d67d56b64e64a43df2ae33d1661917968',
    '0e305c236ab09bf05dd5d40c85d41b17731a1f02',
    '0e3fe2462bb9c6314039f277955946bc6b353861',
    '0e43e7421a058a955982c42cbc59eaaaad1d7cec',
    '0e4720b5f863bcbfe8b05b86f5dd5b92dd190b1b',
    '0e8517d807f1c382bc575bfc2355394461c2ffeb',
    '0e8ba9b23b99bde6309eb5866a34d349ba313ad3',
    '0e8e69fc7501e9fb9287c7429c41af7adbfc6808',
    '0e91f0906efa1e88ce9ef4cb84fc269d6269434b',
    '0e94c2ba24352acf41814d1a76a2b4152694c7f4',
    '0e9f5c3f2621d4db3521515929a89a04276246e5',
    '0ec8d2365378130805a0ca8fe52056dcc6320b14',
    '0ed6fc8f0fd7985c71e52c7faa26506718b5dfde',
    '0eda5cff805c473edc1e7a35a142f3bf264e5a63',
    '0f0e2366bed29dd3fd4be586b60c37fb9706eca6',
    '0f12e3ded8201f2f87b97cc9faebb8563c39150c',
    '0f12eb0a27672a6159e6f96a0c8fde37e27d8764',
    '0f1427f60a9a05ece29c412b9c1811ff14c1d633',
    '0f1de6efb7e84cc3b51049c82a44c57342814c29',
    '0f24130ad535c975c71be46d4b8924a0bf2c33a9',
    '0f45b1f73075542984ea771115567f71463a3acd',
    '0f5d5baea324c2d980b2b9e305100553e008c0f6',
    '0f60b702cc2779ff3771d5e8adaf595f1c1bfc64',
    '0f77d99509fce8fdb23df4fed5be74a698d55620',
    '0f8adb5d44395ab30ec6a255dcd1257296d9ef80',
    '0fa6dc4f362fe3e0c1ac0fe11204ba264957da42',
    '0fae5c24822f02fbcac2a6e151b2c9e6facb87ee',
    '0fb3b86e9989cbed1bfa3b959ef15c1dacca852b',
    '0fc0a230251f5ff7073bc79734c0683e2d115905',
    '0fc8a22b92075060ca4e9c87ef8bb1cb47cd5867',
    '0fdd8e3bc43c2be1851bbcc2a5ba0ad6bc39529a',
    '0fde460af5945d5fb597df722098fb126179db71',
    '0fea80fb78d570424e549a1e54a0d86ea653dd13',
    '0fead4e563503ccc39b49d717d66cd80041c42db',
    '0ff5cccd6d59fee489ec17a4c8b8b097132d8f0f',
    '0ffd022eef2b36fde277001050ea8f8fb8db70ef',
    '0ffeb23c4b594d927896c68140c1b034ead8764a',
    '1a04f52b86d137f861ece127897a9d9eb5a5f8ec',
    '1a170fda4911302d0c3f701bae897468969b818a',
    '1a21eaad6b741863e803ad5c586072b3a1d1121d',
    '1a2335fba5e6159642be68b353f8e53dc4100b28',
    '1a2347b54f0e3cd6a4b9ba868829e49fb1a02b0d',
    '1a32369d8dc6c910914b9fd05374af63530efc4f',
    '1a35eaa9aa3f6f11068016581b17cc4971ab39fe',
    '1a376a0af5289f59a9d58d0be8a45962e7f42cda',
    '1a3c6b83fd9904f9d5ca9007ecf75ddbc3a769fc',
    '1a3eef43a87b44ed2bb603c3e8e0a4f801a0101d',
    '1a594dcfe8f6119da0de30f81977230cfa653e5a',
    '1a60b73899bd319d0863ef0b2fbc007ebb459722',
    '1a65eee0cf115f008630063b6831c32ec5b8cfd1',
    '1a6aadffaf20b56fe6f64ce2681def25604959f1',
    '1a6aef05bf87e43fd351b0b6a1ef679bdf691e08',
    '1a6b9cb7445342ecd6efcf069ac4d539158967da',
    '1a6f9445dd909f7cd82bbc366e68d4c412152739',
    '1a7612abaceb1fa6f3acebec965afac40e088f04',
    '1a82cb00f799cc3771d8fc76588f5b6d1c3cd06f',
    '1a83b8d6ffb658897848b33993e6c4d98336df6c',
    '1a9f64a13872af7a041cb309e40552eb80d60565',
    '1aa558e741d73c33607e01726895ecf3ef72adf9',
    '1aa7e349d597f5418198213f8c22e53d07f28319',
    '1ab602f5ddfc1f32f1ac17888c92b2a465ae1642',
    '1ae7eef294774f87604a10b4a648decd9b4f42c9',
    '1af98be9d9946a7fd4ae0ba628927081c8a53e86',
    '1b1039310e412aa0ba53b81dc12cffc4936c8500',
    '1b224130257fc537bda1bb39f71489044a8b0bc6',
    '1b2672f1629f5e91a5de08371281f2c39af73795',
    '1b2cd568ce1b6b9c201c307f66b6c583b261aec5',
    '1b3152b708b29a209ce041cbf4ae0a295eeb1243',
    '1b419f8968a4d89ec4820652e72e51d46a1319ce',
    '1b43ffd6a07b7d2a96fd55b34bc08aeed17e52f7',
    '1b48396ab66834a7995b9f4f22709852335fb6e7',
    '1b717ce22f87f6f525adec22aafb377a6ecb352b',
    '1b9d80eb02b95b4215390e912025229416c4361a',
    '1ba32d5d7731c13658945bce4ecebd2add8b60d4',
    '1ba9c1b04ca92586ef4e24d6c422a7a3f632ed74',
    '1babc0994b847d0f68cc22fd390abbed2f38d96a',
    '1bb0d066f4b16fd32b0f46a1b7d807c1a7244b43',
    '1bb49df312206a63f6b123130f77335af7edc257',
    '1bb5f0e8ca63317ff0159f436a5321a7da46e590',
    '1bc1b0a4ba977cf43e8f13f1d3cb706bb77e221e',
    '1bd804e5f6db65e458e517dec385d780312a1b0d',
    '1bda0db88b29025399f6cf166981b8f857a5b5e2',
    '1bdb2e65a02d75c5e0535a7eab2e4f1a3650e587',
    '1bde08d8a90e37fe81c9d57845e42a44ab955111',
    '1beb259f0eda089235acc46f3914b30d088019e9',
    '1bfdae155a1815bf06a72585107701b870a4a23c',
    '1c0088f889ed206279dc993911884a35e433b480',
    '1c2d123a087a047ecc35c96e3b1af3825f0ce837',
    '1c306b700219ce0dfffed7ced0ea2775773cd326',
    '1c3d24c272efb8a53b6a61354eaab54b9f3f886c',
    '1c4171a3a7416ad0d286876d48c5c2ce1e3102d7',
    '1c465b4776b5037d71e8096dc790efc1902d34f7',
    '1c59103bf845c29d2b0bea93219b869f98062d7f',
    '1c6dc8785abc8af7e9e402eb21f436cd2157cd7a',
    '1c718553c0a341bef14d1dd12b1220b1935d400d',
    '1cb69af68852bff1142aac687aca3283acc7c848',
    '1cc04d44823e9228d13ba0f1675948d43e6fa758',
    '1cc14d7bd463742fd135f57024035362a07ac325',
    '1cc796791e29c1e6b31f86a14b69bad6360a8243',
    '1cd8b57bbff1cf10fc2dfab689db6a2035eed6d1',
    '1cde4a1221e50aa0b5a184e75f4612d3b38012d9',
    '1cea238ab763cf1a43c6160701e7eb1d92c4c007',
    '1cf4c4ad2f9c04e7e6b5782822b1b66ba7377d72',
    '1d0473b40a45bed09f48b1d54b9dfbf30d77cb3a',
    '1d0618c609be86417d2f9f27d78f5b214abf4b14',
    '1d2d13d82ba3bf4ae350635661689d602ead31e9',
    '1d521443e2b2a41d758181a51075ab8d769a1023',
    '1d62d37d19096d66967b8f4d728c4128c662a103',
    '1d6955698cf00a61adba3b87303291104de22704',
    '1d6b4c290e80488ce2bffe2a40034fcdadee510b',
    '1d75db85a2a51314660c53875f936dd5cabb690c',
    '1d8de5ef3bfb4281de5382f0240f2e033f3d37c9',
    '1d961ecf92a00454445089d1682b502d0fc24f81',
    '1d9ba94a410050291a9e1dd6068810283444b8e8',
    '1da9e6a7bb014dc73fc3792005b755b03fcd1b01',
    '1dba586766c45a179ca6fad2dff4f0305dcbcf79',
    '1dc22f926c56d3cd4299ab8adde99ffc1ecafdac',
    '1dc96008e6dfbf87ea360acf4192a84088c9f620',
    '1de937741f7ffc7ce58090330085006426efb6d9',
    '1dfd021e895b730a51c6554dfb7eb62ad2398d57',
    '1dfebcc1846448d144209df08f9408cf029ce778',
    '1e0dd5a1f75425296bf5ee0bc38f8e5176cb9f0c',
    '1e114bcd677719d77930f9e3eaf2c90c1b91f9d2',
    '1e2c45940ad69bdebcc7365efb5550cdedc38d69',
    '1e2f27f8dd2fe48942bc6c0ac4f74d6b2ef8a1ec',
    '1e2f4c2e37ebaf2dbe7997ef35583bc83107069e',
    '1e3e8864ed6073130c038da71426616c4a5eecb3',
    '1e456bfc405c6895908fd0969e56d31731c4a589',
    '1e5a06049800863f1b057c231f525a1601a281c3',
    '1e63dda9c5095008f4fc73fa528ecc15f2bafa5d',
    '1e6a837245b6d6f56f9b076c477849a356cc4160',
    '1e894e5d298e95ac876f27c4be06bccd2abfd02c',
    '1e89c6b1209d64e6f9f2362d5039829ec7392a19',
    '1ea0502fb5892e7b63d130d992aac8fba39e049e',
    '1eab8d38cda79b283b49991bc86fdade394795b6',
    '1eb27d8307e8ca7d8b4c249ef7a0e1158f09e8a3',
    '1ecd13df5f7f5ea3bd171e9bdc3cff65ffba987b',
    '1ee0aeae74bad98176e4d1536e9a2f8dcaea2cf0',
    '1ee792f41c645ba71dbde22ba7ac8582c23e04e6',
    '1ef499ca9c2bb5f4070480b972d50670126acbcd',
    '1f0189f73772357ee56095586edc9edfd0e87203',
    '1f05903ad7400ee4165fb212985396b924a1cb74',
    '1f09bb154527e83880e65ba67cb158b8e3f1250d',
    '1f151e919836c1beaeaf9e963d1fb7972013f565',
    '1f1c540664b2cb8f3c87c14c57d806dc22e32972',
    '1f1dc341dbe7f87da6a0d08ff4d35fde4ae006cc',
    '1f1e3bc5ec430683a17c01c48bf2da8c4070be51',
    '1f1fb91c54555a586e1c62bf3eb3d8386dd5e49f',
    '1f2bad4f7448a44e43446c6f6b8f419e6c5c549d',
    '1f391433d484ddc3ecc17e0a8dbd1b3cf888928b',
    '1f4af7051746bbfea3f413d71c4db299830b350a',
    '1f5aeeeaa5b83da5942b734eb89f8f0b27329036',
    '1f77ea527f894867ceb4e2acaf99b28e58f6cd13',
    '1f839022c6fcaa6ed8b1f41e52d3d27b41c8ca37',
    '1f8aeb1608e16d615c239fc8610fb165945eeb48',
    '1f8c9cc3d0f2144554054f0faf3593b1b9210ae3',
    '1fa9cc4b2068682a4a6dd8c94d96b303933f01a6',
    '1faa4ab81a9f2044d34ddbb231d85cce50a04612',
    '1fbc93e5ec459174ad3448c870c7409920db3998',
    '1fc97adda0cc05c74e0bcced653f6b3a2e57bce7',
    '1fcf59884931870851721b4ab301c3df7a283b28',
    '1fd548defa47f156f92f78f663c572281789fb23',
    '1fe8692bad8015cc4c8201ef9bccf8912b7e2772',
    '1fed57f950211975ca04ae882431183b75dd152f',
    '1fedc54605c12c86f80a1cc5f9e0c46724302ba4',
    '1ffd4847fd8188b3b7a58f51320435c410f78feb']